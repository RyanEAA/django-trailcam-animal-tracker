{% extends "wildlife/base.html" %}
{% block title %}{% if mode == "edit" %}Edit Camera{% else %}New Camera{% endif %}{% endblock %}

{% block content %}
<h1>{% if mode == "edit" %}Edit Camera{% else %}Add Camera{% endif %}</h1>

<form method="post" style="max-width:520px;">
  {% csrf_token %}

  {% if form.non_field_errors %}
    <div style="background:#ffecec; border:1px solid #f5aca6; padding:10px; border-radius:8px; margin-bottom:12px;">
      {{ form.non_field_errors }}
    </div>
  {% endif %}

  <div style="margin-bottom:12px;">
    <label style="display:block; font-weight:600; margin-bottom:6px;">Name</label>
    {{ form.name }}
    {% if form.name.errors %}<div style="color:#b00020;">{{ form.name.errors }}</div>{% endif %}
    <div style="color:#666; font-size:13px; margin-top:6px;">Example: TRAILCAM05</div>
  </div>

  <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px;">
    <div>
      <label style="display:block; font-weight:600; margin-bottom:6px;">Latitude</label>
      {{ form.base_latitude }}
      {% if form.base_latitude.errors %}<div style="color:#b00020;">{{ form.base_latitude.errors }}</div>{% endif %}
    </div>
    <div>
      <label style="display:block; font-weight:600; margin-bottom:6px;">Longitude</label>
      {{ form.base_longitude }}
      {% if form.base_longitude.errors %}<div style="color:#b00020;">{{ form.base_longitude.errors }}</div>{% endif %}
    </div>
  </div>

  <div style="margin-top:12px;">
    <label style="display:block; font-weight:600; margin-bottom:6px;">Description (optional)</label>
    {{ form.description }}
    {% if form.description.errors %}<div style="color:#b00020;">{{ form.description.errors }}</div>{% endif %}
  </div>

  <div style="margin-top:12px;">
    <label style="display:flex; gap:10px; align-items:center;">
      {{ form.is_active }}
      <span style="font-weight:600;">Active</span>
    </label>
  </div>

  <div style="margin-top:16px; display:flex; gap:10px;">
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn" href="{% url 'wildlife:cameras_list' %}">Cancel</a>
  </div>
</form>

<script>
  // Make inputs look consistent even without custom widget attrs
  document.querySelectorAll("input[type=text], input[type=number]").forEach(i => {
    i.style.width = "100%";
    i.style.padding = "10px 12px";
    i.style.borderRadius = "10px";
    i.style.border = "1px solid #d0d0d0";
    i.style.boxSizing = "border-box";
  });
</script>

{% endblock %}
