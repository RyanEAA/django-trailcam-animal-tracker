{% extends "wildlife/base.html" %}

{% block title %}Cameras{% endblock %}

{% block content %}
<h1>Cameras</h1>

<div class="row" style="display:flex; gap:10px; align-items:center; margin: 10px 0 18px 0;">
  <form method="get" style="display:flex; gap:8px; align-items:center;">
    <input type="text"
           name="q"
           value="{{ search_query }}"
           placeholder="Search cameras..."
           style="padding:8px 10px; border-radius:10px; border:1px solid #ccc;">
    <button class="btn" type="submit">Search</button>
  </form>

  <a href="{% url 'wildlife:camera_new' %}" id="newCameraBtn" class="btn btn-primary">+ New Camera</a>
</div>

{% if cameras %}
  <div style="display:flex; flex-wrap:wrap; gap:16px;">
    {% for cam in cameras %}
      <div class="photo-card is-clickable camera-card"
           data-camera-id="{{ cam.id }}"
           data-edit-url="{% url 'wildlife:camera_edit' cam.id %}"
           data-name="{{ cam.name }}"
           data-lat="{{ cam.base_latitude }}"
           data-lon="{{ cam.base_longitude }}"
           data-desc="{{ cam.description|default:''|escape }}"
           data-active="{% if cam.is_active %}true{% else %}false{% endif %}">
        <div class="photo-title">{{ cam.name }}</div>

        <div class="photo-params">
          <strong>Details:</strong>
          <ul>
            <li>Latitude: <span class="meta-field" data-field="lat">{{ cam.base_latitude }}</span></li>
            <li>Longitude: <span class="meta-field" data-field="lon">{{ cam.base_longitude }}</span></li>
            <li>Description: <span class="meta-field" data-field="desc">{{ cam.description|default:"â€”" }}</span></li>
            <li>Status: <span class="meta-field" data-field="active">{% if cam.is_active %}Active{% else %}Inactive{% endif %}</span></li>
          </ul>
        </div>

        <div class="card-actions">
          <!-- Card click navigates to edit page; explicit Edit button removed -->
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No cameras found.</p>
{% endif %}
{% endblock %}

{% block extra_scripts %}
<!-- Camera modal-based JS removed: camera create/edit now use dedicated pages. -->
{% endblock %}